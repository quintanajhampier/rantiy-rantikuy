<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rantiy y Rantikuy - Acceso Seguro</title>
    <style>
        :root {
            --verde-huanta: #4ade80;
            --verde-oscuro: #2d6a4f;
            --naranja-brillante: #ff8c00;
            --fondo-vibrante: #f0fff4;
        }

        body { 
            background-color: var(--fondo-vibrante); 
            font-family: 'Segoe UI', Roboto, sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; 
        }

        .contenedor { 
            background: white; padding: 40px 30px; border-radius: 30px; 
            box-shadow: 0 20px 40px rgba(45, 106, 79, 0.15); 
            width: 90%; max-width: 420px; text-align: center; 
            border: 3px solid var(--verde-huanta);
        }

        /* T√≠tulo con interacci√≥n secreta */
        h1 { 
            color: var(--verde-oscuro); margin-bottom: 5px; font-size: 28px; 
            font-weight: 800; cursor: pointer; user-select: none; 
        }
        
        .eslogan { color: var(--naranja-brillante); font-weight: bold; font-size: 13px; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 2px; }
        
        .alerta-gps { 
            background: #fff9f0; border-radius: 15px; padding: 15px; margin-bottom: 25px; 
            font-size: 12px; color: #854d0e; text-align: left; border: 1px solid #fde68a;
            display: flex; align-items: center; gap: 10px;
        }

        .input-group { margin-bottom: 15px; text-align: left; }
        label { font-size: 12px; color: var(--verde-oscuro); font-weight: bold; margin-left: 10px; }
        
        input { 
            width: 100%; padding: 14px 18px; margin-top: 5px;
            border: 2px solid #edf2f7; border-radius: 16px; outline: none; 
            box-sizing: border-box; font-size: 16px; background: #f8fafc;
        }

        .terminos-box { 
            background: #f1f5f9; padding: 15px; border-radius: 16px; 
            height: 100px; overflow-y: auto; font-size: 11px; color: #64748b; 
            text-align: left; margin: 20px 0; border: 1px solid #e2e8f0;
        }

        .check-group { display: flex; align-items: center; gap: 12px; font-size: 12px; color: #334155; cursor: pointer; margin-bottom: 25px; }
        
        .btn-ingresar { 
            background: linear-gradient(135deg, var(--verde-huanta), var(--verde-oscuro)); 
            color: white; border: none; padding: 18px; width: 100%; border-radius: 18px; 
            font-weight: 800; font-size: 17px; cursor: pointer;
            box-shadow: 0 10px 20px rgba(45, 106, 79, 0.2); 
        }

        /* MODAL ADMIN OCULTO */
        #admin-modal { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.6); z-index: 1000; align-items: center; justify-content: center; 
        }
        .admin-caja { background: white; padding: 30px; border-radius: 20px; width: 80%; max-width: 300px; text-align: center; }

        #status { font-size: 13px; font-weight: 700; margin-top: 20px; color: var(--verde-oscuro); }
    </style>
</head>
<body>

<div class="contenedor">
    <h1 onclick="contarClics()">Rantiy y Rantikuy</h1>
    <div class="eslogan">El Imperio del Comercio</div>

    <div id="user-view">
        <div class="alerta-gps">üìç Verificaci√≥n Satelital para un mercado sin estafas.</div>

        <div class="input-group">
            <label>IDENTIDAD</label>
            <input type="text" id="nombre" placeholder="Tu nombre completo">
        </div>

        <div class="input-group">
            <label>TEL√âFONO</label>
            <input type="tel" id="telefono" placeholder="N√∫mero de celular">
        </div>

        <div class="terminos-box">
            ‚Ä¢ Seguridad: Su ubicaci√≥n se registra para evitar estafas.<br>
            ‚Ä¢ Transparencia: El administrador vigila la paz del mercado.<br>
            ‚Ä¢ Expulsi√≥n: Estafadores ser√°n baneados permanentemente.
        </div>

        <label class="check-group">
            <input type="checkbox" id="acepto">
            <span>Acepto las leyes del imperio.</span>
        </label>

        <button id="btnEntrar" onclick="validarYEntrar()" class="btn-ingresar">SOLICITAR ACCESO</button>
    </div>

    <div id="status"></div>
</div>

<div id="admin-modal">
    <div class="admin-caja">
        <h3 style="color: var(--naranja-brillante);">MODO COMANDANTE</h3>
        <input type="password" id="admin-pass" placeholder="Clave Maestra">
        <button onclick="loginAdmin()" style="background:var(--verde-oscuro); color:white; border:none; padding:12px; width:100%; border-radius:12px; margin-top:10px; cursor:pointer; font-weight:bold;">ACCESO TOTAL</button>
        <button onclick="cerrarAdmin()" style="background:none; border:none; color:gray; margin-top:10px; cursor:pointer; font-size:11px;">Cancelar</button>
    </div>
</div>

<script>
    let clicks = 0;
    let timer;

    // EL TRUCO DE LOS 7 CLICS
    function contarClics() {
        clicks++;
        clearTimeout(timer);
        if (clicks === 7) {
            document.getElementById('admin-modal').style.display = 'flex';
            clicks = 0;
        }
        timer = setTimeout(() => { clicks = 0; }, 3000); // 3 segundos para completar los 7 clics
    }

    function cerrarAdmin() { document.getElementById('admin-modal').style.display = 'none'; }

    async function validarYEntrar() {
        const nombre = document.getElementById('nombre').value.trim();
        const telefono = document.getElementById('telefono').value.trim();
        const acepto = document.getElementById('acepto').checked;
        const status = document.getElementById('status');
        const btn = document.getElementById('btnEntrar');

        if (!nombre || !telefono || !acepto) { alert("‚ö†Ô∏è Completa tus datos."); return; }

        btn.disabled = true;
        status.innerHTML = "üõ∞Ô∏è Buscando sat√©lite de Huanta...";

        navigator.geolocation.getCurrentPosition(
            async (pos) => {
                const scriptURL = "https://script.google.com/macros/s/AKfycbwsQyjUIFJkUgKpYBQVM-sUccSRMBO1wZlr9m2cofzzFVsO_dpqVyjQzufMRmtNWVI7/exec";
                
                // GUARDAR SESI√ìN NORMAL
                localStorage.setItem('rantiy_user', nombre);
                localStorage.setItem('admin_session', 'false'); // No es admin

                const datos = new FormData();
                datos.append('nombre', nombre);
                datos.append('telefono', telefono);
                datos.append('firma', "ACCESO SATELITAL ‚úÖ");
                datos.append('dispositivo', `COORD: ${pos.coords.latitude}, ${pos.coords.longitude}`);

                try {
                    fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: datos });
                    status.innerText = "¬°Ubicaci√≥n Verificada!";
                    setTimeout(() => { window.location.href = "index.html"; }, 1000);
                } catch (e) { window.location.href = "index.html"; }
            },
            (err) => {
                btn.disabled = false;
                status.style.color = "#dc2626";
                status.innerText = "‚ùå GPS BLOQUEADO. Toca el candado arriba.";
            },
            { enableHighAccuracy: true, timeout: 15000 }
        );
    }

    function loginAdmin() {
        const pass = document.getElementById('admin-pass').value;
        // AQU√ç TU CONTRASE√ëA
        if (pass === "1234") { 
            localStorage.setItem('rantiy_user', "ADMIN_IMPERIO");
            localStorage.setItem('admin_session', "true"); // ESTA ES LA LLAVE PARA INDEX.HTML
            window.location.href = "index.html"; 
        } else {
            alert("Clave incorrecta.");
        }
    }
</script>
</body>
</html>
